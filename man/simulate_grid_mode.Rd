% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/simulate_grid_mode.R
\name{simulate_grid_mode}
\alias{simulate_grid_mode}
\title{Simulate Atmospheric Concentration on a Grid}
\usage{
simulate_grid_mode(sim_dt, puff_dt, output_dt, start_time, end_time, source_coords,
  emission_rate, wind_data, grid_coords, puff_duration)
}
\arguments{
\item{sim_dt}{Integer. Simulation time step (in seconds), determining how frequently the simulation
updates the positions of puffs and calculates concentrations. This is the base resolution of the simulation.}

\item{puff_dt}{Integer. Time interval (in seconds), determining how frequently new puffs are emitted into
the simulation.}

\item{output_dt}{Integer. Desired time resolution (in seconds) for the final output of concentrations.}

\item{start_time}{POSIXct. Start time of the simulation.}

\item{end_time}{POSIXct. End time of the simulation.}

\item{source_coords}{Numeric vector. Coordinates of the emission source in meters (x, y, z).
E.g, \code{c(x = 10, y = 0, z = 1.5)}.}

\item{emission_rate}{Numeric. Emission rate of the source in kg/s.}

\item{wind_data}{Data frame. Wind data containing columns \code{wind_u} and \code{wind_v},
representing wind components in the x and y directions, respectively, for each simulation step.}

\item{grid_coords}{List. A list with three numeric vectors specifying the grid points for \code{x}, \code{y}, and \code{z}.
E.g., \code{list(x = seq(0, 50, by = 1), y = seq(0, 50, by = 1), z = c(2.5))}.}

\item{puff_duration}{Numeric. Lifetime of each puff (in seconds) before it dissipates. Default at 1200.}
}
\value{
An array of methane concentrations at every grid point over time
}
\description{
Simulates atmospheric concentrations at every grid point over time using the Gaussian puff forward model.
Concentrations are calculated based on emission rates, wind conditions, and puff dispersion.
}
\examples{
\dontrun{
set.seed(123)
sim_dt <- 4
puff_dt <- 4
output_dt <- 60
start_time <- "2024-01-01 12:00:00"
end_time <- "2024-01-01 13:00:00"
source_coords <- c(0, 0, 2.5)
emission_rate <- 3.5

fake_times <- seq(0, 10, length.out = 61)
wind_speeds <- rep(3, 61)
wind_data <- data.frame(
 wind_u = runif(3601, min = -3, max = 0.7),
 wind_v = runif(3601, min = -3, max = 1.5)
)

grid_coords <- list(
  x = seq(-5, 5, by = 1),
  y = seq(-5, 5, by = 1),
  z = c(2.5)
)

grid_concentrations_original <- simulate_grid_mode(
    sim_dt = sim_dt,
    puff_dt = puff_dt,
    output_dt = output_dt,
    start_time = start_time,
    end_time = end_time,
    source_coords = source_coords,
    emission_rate = emission_rate,
    wind_data = wind_data,
    grid_coords = grid_coords,
    puff_duration = 1200
)
}
}
